{"code":"!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.AbriGL=e():t.AbriGL=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=0)}([function(t,e,r){\"use strict\";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.r(e),r.d(e,\"default\",(function(){return C}));var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.gl=e}var e,r,i;return e=t,(r=[{key:\"create_vs\",value:function(t){var e;if(e=this.gl.createShader(this.gl.VERTEX_SHADER),this.gl.shaderSource(e,t),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS))return e;alert(this.gl.getShaderInfoLog(e))}},{key:\"create_fs\",value:function(t){var e;if(e=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.shaderSource(e,t),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS))return e;alert(this.gl.getShaderInfoLog(e))}},{key:\"create_program\",value:function(t,e){var r=this.gl.createProgram();if(this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS))return this.gl.useProgram(r),r;alert(this.gl.getProgramInfoLog(r))}},{key:\"create_vbo\",value:function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e}},{key:\"set_attribute\",value:function(t,e,r){for(var n in t)this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t[n]),this.gl.enableVertexAttribArray(e[n]),this.gl.vertexAttribPointer(e[n],r[n],this.gl.FLOAT,!1,0,0)}},{key:\"create_ibo\",value:function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Int16Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),e}},{key:\"create_texture\",value:function(t){var e=new Image;e.onload=function(){var t=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null),textureInstnace.t=t},e.src=t}},{key:\"create_framebuffer\",value:function(t,e){var r=this.gl.createFramebuffer();this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,r);var n=this.gl.createRenderbuffer();this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,n),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,t,e),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,n);var i=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,t,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,i,0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),{f:r,d:n,t:i}}}])&&n(e.prototype,r),i&&n(e,i),t}();function a(t,e){var r;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if(\"string\"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===r&&t.constructor&&(r=t.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(t);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&\"number\"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,s=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}var c=function(){function t(e){s(this,t),this.gl=e,this.w=new i(e)}return l(t,[{key:\"init\",value:function(t,e){var r=this,n=this.w.create_vs(t),i=this.w.create_fs(e);this.prg=this.w.create_program(n,i),this.cap=[],this.attList=[],this.attLocation=[],this.attStride=[],this.uniLocation={},this.uniformFunction={},this.currentInstance=null;var o,s,u,l=function(t,e){r.gl.uniform1i(t,e)},c={position:3,normal:3,color:4,textureCoord:2},h={mat4:function(t,e){r.gl.uniformMatrix4fv(t,!1,e)},vec4:function(t,e){r.gl.uniform4fv(t,e)},vec3:function(t,e){r.gl.uniform3fv(t,e)},vec2:function(t,e){r.gl.uniform2fv(t,e)},float:function(t,e){r.gl.uniform1f(t,e)},int:l,sampler2D:l,bool:l},f=a(t.split(\";\").concat(e.split(\";\")));try{for(f.s();!(u=f.n()).done;){var g=u.value;g.indexOf(\"attribute\")+1?this.attList.push(g.split(\" \").slice(-1)[0]):g.indexOf(\"uniform\")+1&&(o=g.split(\" \").slice(-1)[0],s=g.split(\" \").filter((function(t){return\"\"!=t})).slice(-2)[0],this.uniLocation[o]=this.gl.getUniformLocation(this.prg,o),this.uniformFunction[o]=h[s])}}catch(t){f.e(t)}finally{f.f()}var v,y=a(this.attList);try{for(y.s();!(v=y.n()).done;){var p=v.value;this.attLocation.push(this.gl.getAttribLocation(this.prg,p)),this.attStride.push(c[p])}}catch(t){y.e(t)}finally{y.f()}return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:\"clear\",value:function(t){this.gl.clearColor(t[0],t[1],t[2],t[3]),this.gl.clearDepth(1),this.gl.clearStencil(0),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT)}},{key:\"setCapability\",value:function(t){this.cap.push(t)}},{key:\"setAttribute\",value:function(t,e){this.w.set_attribute(t.VBOList,this.attLocation,this.attStride),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t.Index),this.currentInstance=t,e(t),this.currentInstance=null}},{key:\"setUniform\",value:function(t,e){this.uniformFunction[t](this.uniLocation[t],e)}},{key:\"drawElement\",value:function(t){for(var e in this.currentInstance.texture)this.gl.activeTexture(this.gl.TEXTURE0+Number(e)),this.gl.bindTexture(this.gl.TEXTURE_2D,this.currentInstance.texture[e]);var r,n=a(this.currentInstance.cap);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.gl.enable(i)}}catch(t){n.e(t)}finally{n.f()}var o,s=a(this.currentInstance.unCap);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gl.disable(u)}}catch(t){s.e(t)}finally{s.f()}var l,c=this.currentInstance.stencilSetting;for(var h in this.gl.stencilFunc(c[0],c[1],c[2]),this.gl.stencilOp(c[3],c[4],c[5]),this.currentInstance.uniform)try{l=this.currentInstance.uniform[h],this.setUniform(h,l)}catch(t){console.log(\"uniformKey : \"+h,\"argument : \"+l),console.error(t.message)}this.gl.drawElements(t,this.currentInstance.indexLength,this.gl.UNSIGNED_SHORT,0);var f,g=a(this.currentInstance.cap);try{for(g.s();!(f=g.n()).done;){var v=f.value;this.gl.disable(v)}}catch(t){g.e(t)}finally{g.f()}var y,p=a(this.currentInstance.unCap);try{for(p.s();!(y=p.n()).done;){var b=y.value;this.gl.enable(b)}}catch(t){p.e(t)}finally{p.f()}}}]),t}(),h=function(){function t(e){s(this,t),this.gl=e,this.w=new i(e)}return l(t,[{key:\"init\",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:\"switchShader\",value:function(t,e){this.gl.useProgram(t.prg);var r,n=a(t.cap);try{for(n.s();!(r=n.n()).done;){var i=r.value;this.gl.enable(i)}}catch(t){n.e(t)}finally{n.f()}e(t);var o,s=a(t.cap);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.gl.disable(u)}}catch(t){s.e(t)}finally{s.f()}}},{key:\"setFrameBuffer\",value:function(t,e){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),e(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}},{key:\"createFrameBuffer\",value:function(t,e){return this.w.create_framebuffer(t,e)}}]),t}();function f(t){return(f=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function g(t,e){var r;if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if(\"string\"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===r&&t.constructor&&(r=t.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(t);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t))||e&&t&&\"number\"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){return!e||\"object\"!==f(e)&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),t}var T=function(){function t(e){E(this,t),this.gl=e,this.w=new i(e),this.Index,this.indexLength,this.VBOList=[],this.cap=[],this.unCap=[],this.uniform={},this.texture={0:null},this.stencilSetting=[this.gl.ALWAYS,1,-1,this.gl.KEEP,this.gl.KEEP,this.gl.KEEP],this.colorIndex,this.colorLength}return _(t,[{key:\"setCapability\",value:function(t){this.cap.push(t)}},{key:\"unSetCapability\",value:function(t){this.unCap.push(t)}},{key:\"setTexture\",value:function(t,e){this.texture[t]=e}},{key:\"setUniform\",value:function(t,e){this.uniform[t]=e}},{key:\"setStencil\",value:function(t,e,r,n,i,a){this.stencilSetting=[t,e,r,n,i,a]}},{key:\"setColor\",value:function(t){for(var e=[],r=0;r<this.colorLength;r++)e.push(t[0],t[1],t[2],t[3]);this.VBOList[this.colorIndex]=this.w.create_vbo(e)}}]),t}(),R=function(t){y(r,t);var e=b(r);function r(t){return E(this,r),e.call(this,t)}return _(r,[{key:\"init\",value:function(t,e){var r,n={position:this.w.create_vbo([0,0,0]),normal:this.w.create_vbo([1,1,1]),color:this.w.create_vbo(e),textureCoord:this.w.create_vbo([0,0])},i=0,a=g(t.attList);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.VBOList.push(n[o]),\"color\"==o&&(this.colorIndex=i),i++}}catch(t){a.e(t)}finally{a.f()}return this.colorLength=1,this.indexLength=1,this.Index=this.w.create_ibo([0]),Object.assign(Object.create(Object.getPrototypeOf(this)),this)}}]),r}(T),A=function(t){y(r,t);var e=b(r);function r(t){return E(this,r),e.call(this,t)}return _(r,[{key:\"init\",value:function(t,e){var r,n=k(1,e),i={position:this.w.create_vbo(n.p),normal:this.w.create_vbo(n.n),color:this.w.create_vbo(n.c),textureCoord:this.w.create_vbo(n.t)},a=0,o=g(t.attList);try{for(o.s();!(r=o.n()).done;){var s=r.value;this.VBOList.push(i[s]),\"color\"==s&&(this.colorIndex=a),a++}}catch(t){o.e(t)}finally{o.f()}return this.colorLength=n.p.length/3,this.indexLength=n.i.length,this.Index=this.w.create_ibo(n.i),Object.assign(Object.create(Object.getPrototypeOf(this)),this)}}]),r}(T),I=function(t){y(r,t);var e=b(r);function r(t){return E(this,r),e.call(this,t)}return _(r,[{key:\"init\",value:function(t,e,r){var n,i=M(e,e,1,r),a={position:this.w.create_vbo(i.p),normal:this.w.create_vbo(i.n),color:this.w.create_vbo(i.c),textureCoord:this.w.create_vbo(i.t)},o=0,s=g(t.attList);try{for(s.s();!(n=s.n()).done;){var u=n.value;this.VBOList.push(a[u]),\"color\"==u&&(this.colorIndex=o),o++}}catch(t){s.e(t)}finally{s.f()}return this.colorLength=i.p.length/3,this.indexLength=i.i.length,this.Index=this.w.create_ibo(i.i),Object.assign(Object.create(Object.getPrototypeOf(this)),this)}}]),r}(T),O=function(t){y(r,t);var e=b(r);function r(t){return E(this,r),e.call(this,t)}return _(r,[{key:\"init\",value:function(t,e,r,n,i){var a,o=S(e,e,r,n,i),s={position:this.w.create_vbo(o.p),normal:this.w.create_vbo(o.n),color:this.w.create_vbo(o.c),textureCoord:this.w.create_vbo(o.t)},u=0,l=g(t.attList);try{for(l.s();!(a=l.n()).done;){var c=a.value;this.VBOList.push(s[c]),\"color\"==c&&(this.colorIndex=u),u++}}catch(t){l.e(t)}finally{l.f()}return this.indexLength=o.i.length,this.Index=this.w.create_ibo(o.i),Object.assign(Object.create(Object.getPrototypeOf(this)),this)}}]),r}(T),x=function(t){y(r,t);var e=b(r);function r(t){return E(this,r),e.call(this,t)}return _(r,[{key:\"init\",value:function(t){var e,r=[0,2,1,3,1,2],n={position:this.w.create_vbo([-1,1,0,1,1,0,-1,-1,0,1,-1,0]),color:this.w.create_vbo([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1])},i=0,a=g(t.attList);try{for(a.s();!(e=a.n()).done;){var o=e.value;this.VBOList.push(n[o]),\"color\"==o&&(this.colorIndex=i),i++}}catch(t){a.e(t)}finally{a.f()}return this.indexLength=r.length,this.Index=this.w.create_ibo(r),Object.assign(Object.create(Object.getPrototypeOf(this)),this)}}]),r}(T),F=function(){function t(e){E(this,t),this.gl=e}return _(t,[{key:\"init\",value:function(t){return this.t=null,this.changeImg(t)}},{key:\"changeImg\",value:function(t){var e=this;return new Promise((function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(t){return r(t)},n.src=t})).then((function(t){var r=e.gl.createTexture();return e.gl.bindTexture(e.gl.TEXTURE_2D,r),e.gl.texImage2D(e.gl.TEXTURE_2D,0,e.gl.RGBA,e.gl.RGBA,e.gl.UNSIGNED_BYTE,t),e.gl.generateMipmap(e.gl.TEXTURE_2D),e.gl.bindTexture(e.gl.TEXTURE_2D,null),e.t=r,e}))}}]),t}(),S=function(t,e,r,n,i){for(var a=new Array,o=new Array,s=new Array,u=new Array,l=new Array,c=0;c<=t;c++)for(var h=2*Math.PI/t*c,f=Math.cos(h),g=Math.sin(h),v=0;v<=e;v++){var y=2*Math.PI/e*v,p=(f*r+n)*Math.cos(y),b=g*r,d=(f*r+n)*Math.sin(y),m=f*Math.cos(y),E=f*Math.sin(y),w=void 0;w=i||L(360/e*v,1,1,1);var _=1/e*v,T=1/t*c+.5;T>1&&(T-=1),T=1-T,a.push(p,b,d),o.push(m,g,E),s.push(w[0],w[1],w[2],w[3]),u.push(_,T)}for(var R=0;R<t;R++)for(var A=0;A<e;A++){var I=(e+1)*R+A;l.push(I,I+e+1,I+1),l.push(I+e+1,I+e+2,I+1)}return{p:a,n:o,c:s,t:u,i:l}},M=function(t,e,r,n){for(var i,a=new Array,o=new Array,s=new Array,u=new Array,l=new Array,c=0;c<=t;c++)for(var h=Math.PI/t*c,f=Math.cos(h),g=Math.sin(h),v=0;v<=e;v++){var y=2*Math.PI/e*v,p=g*r*Math.cos(y),b=f*r,d=g*r*Math.sin(y),m=g*Math.cos(y),E=g*Math.sin(y);i=n||L(360/t*c,1,1,1),a.push(p,b,d),o.push(m,f,E),s.push(i[0],i[1],i[2],i[3]),u.push(1-1/e*v,1/t*c)}for(var w=0,_=0;_<t;_++)for(var T=0;T<e;T++)w=(e+1)*_+T,l.push(w,w+1,w+e+2),l.push(w,w+e+2,w+e+1);return{p:a,n:o,c:s,t:u,i:l}},k=function(t,e){for(var r,n=.5*t,i=[-n,-n,n,n,-n,n,n,n,n,-n,n,n,-n,-n,-n,-n,n,-n,n,n,-n,n,-n,-n,-n,n,-n,-n,n,n,n,n,n,n,n,-n,-n,-n,-n,n,-n,-n,n,-n,n,-n,-n,n,n,-n,-n,n,n,-n,n,n,n,n,-n,n,-n,-n,-n,-n,-n,n,-n,n,n,-n,n,-n],a=new Array,o=0;o<i.length/3;o++)r=e||L(360/i.length/3*o,1,1,1),a.push(r[0],r[1],r[2],r[3]);return{p:i,n:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],c:a,t:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],i:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}},L=function(t,e,r,n){if(!(e>1||r>1||n>1)){var i=t%360,a=Math.floor(i/60),o=i/60-a,s=r*(1-e),u=r*(1-e*o),l=r*(1-e*(1-o)),c=new Array;if(!e>0&&!e<0)c.push(r,r,r,n);else{var h=new Array(r,u,s,s,l,r),f=new Array(l,r,r,u,s,s),g=new Array(s,s,l,r,r,u);c.push(h[a],f[a],g[a],n)}return c}};function U(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t,e,r){return e&&B(t.prototype,e),r&&B(t,r),t}var j=function(){function t(){U(this,t)}return P(t,[{key:\"create\",value:function(){return new Float32Array(16)}},{key:\"identity\",value:function(){var t=this.create();return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:\"multiply\",value:function(t,e){var r=this.create(),n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],g=t[10],v=t[11],y=t[12],p=t[13],b=t[14],d=t[15],m=e[0],E=e[1],w=e[2],_=e[3],T=e[4],R=e[5],A=e[6],I=e[7],O=e[8],x=e[9],F=e[10],S=e[11],M=e[12],k=e[13],L=e[14],U=e[15];return r[0]=m*n+E*s+w*h+_*y,r[1]=m*i+E*u+w*f+_*p,r[2]=m*a+E*l+w*g+_*b,r[3]=m*o+E*c+w*v+_*d,r[4]=T*n+R*s+A*h+I*y,r[5]=T*i+R*u+A*f+I*p,r[6]=T*a+R*l+A*g+I*b,r[7]=T*o+R*c+A*v+I*d,r[8]=O*n+x*s+F*h+S*y,r[9]=O*i+x*u+F*f+S*p,r[10]=O*a+x*l+F*g+S*b,r[11]=O*o+x*c+F*v+S*d,r[12]=M*n+k*s+L*h+U*y,r[13]=M*i+k*u+L*f+U*p,r[14]=M*a+k*l+L*g+U*b,r[15]=M*o+k*c+L*v+U*d,r}},{key:\"scale\",value:function(t,e){var r=this.create();return r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[0],r[3]=t[3]*e[0],r[4]=t[4]*e[1],r[5]=t[5]*e[1],r[6]=t[6]*e[1],r[7]=t[7]*e[1],r[8]=t[8]*e[2],r[9]=t[9]*e[2],r[10]=t[10]*e[2],r[11]=t[11]*e[2],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}},{key:\"translate\",value:function(t,e){var r=this.create();return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12],r[13]=t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13],r[14]=t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14],r[15]=t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15],r}},{key:\"rotate\",value:function(t,e,r){var n=this.create(),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(!i)return null;var a=r[0],o=r[1],s=r[2];1!=i&&(a*=i=1/i,o*=i,s*=i);var u=Math.sin(e),l=Math.cos(e),c=1-l,h=t[0],f=t[1],g=t[2],v=t[3],y=t[4],p=t[5],b=t[6],d=t[7],m=t[8],E=t[9],w=t[10],_=t[11],T=a*a*c+l,R=o*a*c+s*u,A=s*a*c-o*u,I=a*o*c-s*u,O=o*o*c+l,x=s*o*c+a*u,F=a*s*c+o*u,S=o*s*c-a*u,M=s*s*c+l;return e?t!=n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]):n=t,n[0]=h*T+y*R+m*A,n[1]=f*T+p*R+E*A,n[2]=g*T+b*R+w*A,n[3]=v*T+d*R+_*A,n[4]=h*I+y*O+m*x,n[5]=f*I+p*O+E*x,n[6]=g*I+b*O+w*x,n[7]=v*I+d*O+_*x,n[8]=h*F+y*S+m*M,n[9]=f*F+p*S+E*M,n[10]=g*F+b*S+w*M,n[11]=v*F+d*S+_*M,n}},{key:\"lookAt\",value:function(t,e,r){var n,i,a,o,s,u,l,c,h,f,g=this.create(),v=t[0],y=t[1],p=t[2],b=r[0],d=r[1],m=r[2],E=e[0],w=e[1],_=e[2];return v==E&&y==w&&p==_?this.identity(g):(l=v-e[0],c=y-e[1],h=p-e[2],n=d*(h*=f=1/Math.sqrt(l*l+c*c+h*h))-m*(c*=f),i=m*(l*=f)-b*h,a=b*c-d*l,(f=Math.sqrt(n*n+i*i+a*a))?(n*=f=1/f,i*=f,a*=f):(n=0,i=0,a=0),o=c*a-h*i,s=h*n-l*a,u=l*i-c*n,(f=Math.sqrt(o*o+s*s+u*u))?(o*=f=1/f,s*=f,u*=f):(o=0,s=0,u=0),g[0]=n,g[1]=o,g[2]=l,g[3]=0,g[4]=i,g[5]=s,g[6]=c,g[7]=0,g[8]=a,g[9]=u,g[10]=h,g[11]=0,g[12]=-(n*v+i*y+a*p),g[13]=-(o*v+s*y+u*p),g[14]=-(l*v+c*y+h*p),g[15]=1,g)}},{key:\"perspective\",value:function(t,e,r,n){var i=this.create(),a=r*Math.tan(t*Math.PI/360),o=2*(a*e),s=2*a,u=n-r;return i[0]=2*r/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*r/s,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-(n+r)/u,i[11]=-1,i[12]=0,i[13]=0,i[14]=-n*r*2/u,i[15]=0,i}},{key:\"ortho\",value:function(t,e,r,n,i,a){var o=this.create(),s=e-t,u=r-n,l=a-i;return o[0]=2/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/u,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2/l,o[11]=0,o[12]=-(t+e)/s,o[13]=-(r+n)/u,o[14]=-(a+i)/l,o[15]=1,o}},{key:\"transpose\",value:function(t){var e=this.create();return e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15],e}},{key:\"inverse\",value:function(t){var e=this.create(),r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],f=t[10],g=t[11],v=t[12],y=t[13],p=t[14],b=t[15],d=r*s-n*o,m=r*u-i*o,E=r*l-a*o,w=n*u-i*s,_=n*l-a*s,T=i*l-a*u,R=c*y-h*v,A=c*p-f*v,I=c*b-g*v,O=h*p-f*y,x=h*b-g*y,F=f*b-g*p,S=1/(d*F-m*x+E*O+w*I-_*A+T*R);return e[0]=(s*F-u*x+l*O)*S,e[1]=(-n*F+i*x-a*O)*S,e[2]=(y*T-p*_+b*w)*S,e[3]=(-h*T+f*_-g*w)*S,e[4]=(-o*F+u*I-l*A)*S,e[5]=(r*F-i*I+a*A)*S,e[6]=(-v*T+p*E-b*m)*S,e[7]=(c*T-f*E+g*m)*S,e[8]=(o*x-s*I+l*R)*S,e[9]=(-r*x+n*I-a*R)*S,e[10]=(v*_-y*E+b*d)*S,e[11]=(-c*_+h*E-g*d)*S,e[12]=(-o*O+s*A-u*R)*S,e[13]=(r*O-n*A+i*R)*S,e[14]=(-v*w+y*m-p*d)*S,e[15]=(c*w-h*m+f*d)*S,e}},{key:\"orthographicMatrix\",value:function(){var t=this.lookAt([0,0,.5],[0,0,0],[0,1,0]),e=this.ortho(-1,1,1,-1,.1,1);return this.multiply(e,t)}}]),t}(),D=function(){function t(){U(this,t)}return P(t,[{key:\"create\",value:function(){return new Float32Array(4)}},{key:\"identity\",value:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}},{key:\"inverse\",value:function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}},{key:\"normalize\",value:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=Math.sqrt(e*e+r*r+n*n+i*i);return 0===a?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):(a=1/a,t[0]=e*a,t[1]=r*a,t[2]=n*a,t[3]=i*a),t}},{key:\"multiply\",value:function(t,e,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return r[0]=n*c+o*s+i*l-a*u,r[1]=i*c+o*u+a*s-n*l,r[2]=a*c+o*l+n*u-i*s,r[3]=o*c-n*s-i*u-a*l,r}},{key:\"rotate\",value:function(t,e,r){var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);if(!n)return null;var i=e[0],a=e[1],o=e[2];1!=n&&(i*=n=1/n,a*=n,o*=n);var s=Math.sin(.5*t);return r[0]=i*s,r[1]=a*s,r[2]=o*s,r[3]=Math.cos(.5*t),r}},{key:\"toVecIII\",value:function(t,e,r){var n=this.create(),i=this.create(),a=this.create();return this.inverse(e,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],this.multiply(a,n,i),this.multiply(i,e,a),r[0]=a[0],r[1]=a[1],r[2]=a[2],r}},{key:\"toMatIV\",value:function(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,l=r*o,c=r*s,h=r*u,f=n*s,g=n*u,v=i*u,y=a*o,p=a*s,b=a*u;return e[0]=1-(f+v),e[1]=c-b,e[2]=h+p,e[3]=0,e[4]=c+b,e[5]=1-(l+v),e[6]=g-y,e[7]=0,e[8]=h-p,e[9]=g+y,e[10]=1-(l+f),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:\"slerp\",value:function(t,e,r,n){var i=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],a=1-i*i;if(a<=0)n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3];else if(a=Math.sqrt(a),Math.abs(a)<1e-4)n[0]=.5*t[0]+.5*e[0],n[1]=.5*t[1]+.5*e[1],n[2]=.5*t[2]+.5*e[2],n[3]=.5*t[3]+.5*e[3];else{var o=Math.acos(i),s=o*r,u=Math.sin(o-s)/a,l=Math.sin(s)/a;n[0]=t[0]*u+e[0]*l,n[1]=t[1]*u+e[1]*l,n[2]=t[2]*u+e[2]*l,n[3]=t[3]*u+e[3]*l}return n}}]),t}();var C=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.CanvasManager=new h(e),this.ShaderManager=new c(e),this.Point=new R(e),this.Cube=new A(e),this.Sphere=new I(e),this.Torus=new O(e),this.Texture=new x(e),this.ImgTexture=new F(e);var r=new j,n=new D;this.m=r,this.q=n,this.hsva=L}}]).default}));","extractedComments":[]}